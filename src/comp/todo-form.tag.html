<todo-form>
    <form id="todo-form">
        <input type="text" class="form-control" placeholder="Enter a new issue" name="name"/>
        <br />
                    <div class="form-group">
                        <select class="form-control" id="prioSelect" priority="priority">
                            <option>Priority</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>
                    <input type="text" id="datepicker" class="form-control" placeholder="Pick a Date"/>
                    <br />
        <button id="save_todo" class="btn btn-primary" onclick="{ submit }">Add</button>
    </form>

    <script>
        console.log(opts);
        
        $(function () {
            $("#datepicker").datepicker();
        });
        var tag = this;
        var todos = opts.todos;

//         tag.submit = function(e) {
//         	e.preventDefault();
//             if(tag.name.value) {
//                 todos.add({ "name" : tag.name.value, "priority": tag.prioSelect.value, "date": tag.datepicker.value, "done" : false} );
//                 tag.name.value = "";
//             }
//         }
        
        tag.submit = function(e) {
        	e.preventDefault();
            if(tag.name.value) {
                todos.add({ "title" : tag.name.value, "priority": tag.prioSelect.value, "due_date": Date.parse(tag.datepicker.value), "done" : false}, function() {
                	tag.name.value = "title";
                    tag.prioSelect.value = "priority";
                    tag.datepicker.value = "due_date";
                } );
                tag.name.value = "";
            }
        }
        
    </script>
</todo-form>